### ASDK: do not edit this file ###############################################

### use the './app/config/app_config.cmake' file instead

CMAKE_MINIMUM_REQUIRED(VERSION 3.2)

### enable cross-compilation ###

SET(CMAKE_SYSTEM_NAME Generic)

### set parent directory ###

SET(USER_ROOT_DIR ${CMAKE_CURRENT_SOURCE_DIR})

### set asdk & platform directory ###

SET(ASDK_DIR ${USER_ROOT_DIR}/asdk_core)
SET(PLATFORM_DIR ${USER_ROOT_DIR}/platform)
SET(MIDDLEWARE_DIR ${USER_ROOT_DIR}/catalyst)

### top-level cmake includes ###

INCLUDE(${ASDK_DIR}/cmake/asdk_app_recipe.cmake)

### top-level ASDK core include paths ###

SET(ASDK_CORE_INC
    ${CMAKE_CURRENT_SOURCE_DIR}/asdk_core/common
    ${CMAKE_CURRENT_SOURCE_DIR}/asdk_core/inc
)

### compile "example" only

IF (USE_ASDK_EXAMPLE)

    # include user configuration
    INCLUDE(${USER_ROOT_DIR}/examples/config/app_config.cmake)
    INCLUDE(${USER_ROOT_DIR}/examples/config/asdk_config.cmake)

    AUX_SOURCE_DIRECTORY(${APP_SRC_PATH} APP_SRC)

### compile "app" only

ELSE()

    # include user configuration
    INCLUDE(${USER_ROOT_DIR}/app/config/app_config.cmake)
    INCLUDE(${USER_ROOT_DIR}/app/config/asdk_config.cmake)

    # default include directory
    SET(APP_INC ${CMAKE_CURRENT_SOURCE_DIR}/app/inc)

    # default source directory
    AUX_SOURCE_DIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/app APP_SRC)  

ENDIF()

### top-level project ###

PROJECT(${APP_NAME})

### use c language

ENABLE_LANGUAGE(C)

### compile user application

SET(APP_ELF ${APP_ELF_NAME}.elf)

# compile

ASDK_COMPILE_APPLICATION(
    APP_ELF ${APP_ELF}

    APP_SRC ${APP_SRC}
    APP_INC ${APP_INC}
    APP_USER_SRC ${APP_USER_SRC}
    APP_USER_INC ${APP_USER_INC}
    APP_LINKER_FILE ${APP_LINKER_FILE}

    USER_LINKER_OPTIONS ${USER_LINKER_OPTIONS}
)

### ASDK: do not edit this file ###############################################
